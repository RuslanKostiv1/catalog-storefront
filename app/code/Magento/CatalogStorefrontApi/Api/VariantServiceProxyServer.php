<?php
# Generated by the Magento PHP proto generator.  DO NOT EDIT!

/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

declare(strict_types=1);

namespace Magento\CatalogStorefrontApi\Api;

use \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsRequestInterface;
use \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsResponseInterface;
use \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsRequestInterface;
use \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsResponseInterface;
use \Magento\CatalogStorefrontApi\Api\Data\ProductVariantRequestInterface;
use \Magento\CatalogStorefrontApi\Api\Data\ProductVariantResponseInterface;
use \Magento\CatalogStorefrontApi\Api\Data\OptionSelectionRequestInterface;
use \Magento\CatalogStorefrontApi\Proto\ImportVariantsRequest;
use \Magento\CatalogStorefrontApi\Proto\ImportVariantsResponse;
use \Magento\CatalogStorefrontApi\Proto\DeleteVariantsRequest;
use \Magento\CatalogStorefrontApi\Proto\DeleteVariantsResponse;
use \Magento\CatalogStorefrontApi\Proto\ProductVariantRequest;
use \Magento\CatalogStorefrontApi\Proto\ProductVariantResponse;
use \Magento\CatalogStorefrontApi\Proto\OptionSelectionRequest;
use \Magento\CatalogStorefrontApi\Proto\VariantServiceClient;

/**
 * Autogenerated description for VariantServiceProxyServer class
 *
 * @SuppressWarnings(PHPMD)
 */
class VariantServiceProxyServer implements \Magento\CatalogStorefrontApi\Proto\VariantServiceInterface
{
    /**
     * @var VariantServiceServerInterface
     */
    private $service;

    /**
     * @param VariantServiceServerInterface $service
     */
    public function __construct(
        VariantServiceServerInterface $service
    ) {
        $this->service = $service;
    }

    /**
     * Autogenerated description for importProductVariants method
     *
     * @param \Spiral\GRPC\ContextInterface $ctx
     * @param ImportVariantsRequest $in
     * @return ImportVariantsResponse
     * @SuppressWarnings(PHPMD.UnusedFormalParameter)
     */
    public function importProductVariants(\Spiral\GRPC\ContextInterface $ctx, ImportVariantsRequest $in): ImportVariantsResponse
    {
        try {
            $magentoDtoRequest = $this->importProductVariantsFromProto($in);
            $magentoDtoResponse = $this->service->importProductVariants($magentoDtoRequest);
            return $this->importProductVariantsToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    /**
     * Autogenerated description for importProductVariants method
     *
     * @param ImportVariantsRequest $value
     * @return ImportVariantsRequestInterface
     */
    private function importProductVariantsFromProto(ImportVariantsRequest $value): ImportVariantsRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\ImportVariantsRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\ImportVariantsRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsRequest();
            $res = [];
            foreach ($value->getVariants() as $item1) {
                // convert data from \Magento\CatalogStorefrontApi\Proto\ProductVariantImport
                // to \Magento\CatalogStorefrontApi\Api\Data\ProductVariantImport
                /** @var \Magento\CatalogStorefrontApi\Proto\ProductVariantImport $item1 **/
                $p = function () use ($item1) {
                    $r = new \Magento\CatalogStorefrontApi\Api\Data\ProductVariantImport();
                    $r->setId($item1->getId());
                    $values = [];
                    foreach ($item1->getOptionValues() as $newValue) {
                        $values[] = $newValue;
                    }
                    $r->setOptionValues($values);
                    return $r;
                };
                $out = $p();
                $res[] = $out;
            }
            $r->setVariants($res);
            return $r;
        };
        $out = $p();

        return $out;
    }

    /**
     * Autogenerated description for importProductVariants method
     *
     * @param ImportVariantsResponseInterface $value
     * @return ImportVariantsResponse
     * phpcs:disable Generic.Metrics.NestingLevel.TooHigh
     */
    private function importProductVariantsToProto(ImportVariantsResponseInterface $value): ImportVariantsResponse
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsResponse
        // to \Magento\CatalogStorefrontApi\Proto\ImportVariantsResponse
        /** @var \Magento\CatalogStorefrontApi\Api\Data\ImportVariantsResponse $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\ImportVariantsResponse();
            $r->setStatus($value->getStatus());
            $r->setMessage($value->getMessage());
            return $r;
        };
        $proto = $p();

        return $proto;
    }

    /**
     * Autogenerated description for deleteProductVariants method
     *
     * @param \Spiral\GRPC\ContextInterface $ctx
     * @param DeleteVariantsRequest $in
     * @return DeleteVariantsResponse
     * @SuppressWarnings(PHPMD.UnusedFormalParameter)
     */
    public function deleteProductVariants(\Spiral\GRPC\ContextInterface $ctx, DeleteVariantsRequest $in): DeleteVariantsResponse
    {
        try {
            $magentoDtoRequest = $this->deleteProductVariantsFromProto($in);
            $magentoDtoResponse = $this->service->deleteProductVariants($magentoDtoRequest);
            return $this->deleteProductVariantsToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    /**
     * Autogenerated description for deleteProductVariants method
     *
     * @param DeleteVariantsRequest $value
     * @return DeleteVariantsRequestInterface
     */
    private function deleteProductVariantsFromProto(DeleteVariantsRequest $value): DeleteVariantsRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\DeleteVariantsRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\DeleteVariantsRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsRequest();
            $values = [];
            foreach ($value->getId() as $newValue) {
                $values[] = $newValue;
            }
            $r->setId($values);
            return $r;
        };
        $out = $p();

        return $out;
    }

    /**
     * Autogenerated description for deleteProductVariants method
     *
     * @param DeleteVariantsResponseInterface $value
     * @return DeleteVariantsResponse
     * phpcs:disable Generic.Metrics.NestingLevel.TooHigh
     */
    private function deleteProductVariantsToProto(DeleteVariantsResponseInterface $value): DeleteVariantsResponse
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsResponse
        // to \Magento\CatalogStorefrontApi\Proto\DeleteVariantsResponse
        /** @var \Magento\CatalogStorefrontApi\Api\Data\DeleteVariantsResponse $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\DeleteVariantsResponse();
            $r->setStatus($value->getStatus());
            $r->setMessage($value->getMessage());
            return $r;
        };
        $proto = $p();

        return $proto;
    }

    /**
     * Autogenerated description for getProductVariants method
     *
     * @param \Spiral\GRPC\ContextInterface $ctx
     * @param ProductVariantRequest $in
     * @return ProductVariantResponse
     * @SuppressWarnings(PHPMD.UnusedFormalParameter)
     */
    public function getProductVariants(\Spiral\GRPC\ContextInterface $ctx, ProductVariantRequest $in): ProductVariantResponse
    {
        try {
            $magentoDtoRequest = $this->getProductVariantsFromProto($in);
            $magentoDtoResponse = $this->service->getProductVariants($magentoDtoRequest);
            return $this->getProductVariantsToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    /**
     * Autogenerated description for getProductVariants method
     *
     * @param ProductVariantRequest $value
     * @return ProductVariantRequestInterface
     */
    private function getProductVariantsFromProto(ProductVariantRequest $value): ProductVariantRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\ProductVariantRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\ProductVariantRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\ProductVariantRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\ProductVariantRequest();
            $r->setProductId($value->getProductId());
            $r->setStore($value->getStore());
            return $r;
        };
        $out = $p();

        return $out;
    }

    /**
     * Autogenerated description for getProductVariants method
     *
     * @param ProductVariantResponseInterface $value
     * @return ProductVariantResponse
     * phpcs:disable Generic.Metrics.NestingLevel.TooHigh
     */
    private function getProductVariantsToProto(ProductVariantResponseInterface $value): ProductVariantResponse
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\ProductVariantResponse
        // to \Magento\CatalogStorefrontApi\Proto\ProductVariantResponse
        /** @var \Magento\CatalogStorefrontApi\Api\Data\ProductVariantResponse $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\ProductVariantResponse();
            $res = [];
            foreach ($value->getMatchedVariants() as $item1) {
                // convert data from \Magento\CatalogStorefrontApi\Api\Data\ProductVariant
                // to \Magento\CatalogStorefrontApi\Proto\ProductVariant
                /** @var \Magento\CatalogStorefrontApi\Api\Data\ProductVariant $item1 **/
                $p = function () use ($item1) {
                    $r = new \Magento\CatalogStorefrontApi\Proto\ProductVariant();
                    $r->setId($item1->getId());
                    $values = [];
                    foreach ($item1->getOptionValues() as $newValue) {
                        $values[] = $newValue;
                    }
                    $r->setOptionValues($values);
                    $r->setProductId($item1->getProductId());
                    return $r;
                };
                $proto = $p();
                $res[] = $proto;
            }
            $r->setMatchedVariants($res);
            return $r;
        };
        $proto = $p();

        return $proto;
    }

    /**
     * Autogenerated description for getVariantsMatch method
     *
     * @param \Spiral\GRPC\ContextInterface $ctx
     * @param OptionSelectionRequest $in
     * @return ProductVariantResponse
     * @SuppressWarnings(PHPMD.UnusedFormalParameter)
     */
    public function getVariantsMatch(\Spiral\GRPC\ContextInterface $ctx, OptionSelectionRequest $in): ProductVariantResponse
    {
        try {
            $magentoDtoRequest = $this->getVariantsMatchFromProto($in);
            $magentoDtoResponse = $this->service->getVariantsMatch($magentoDtoRequest);
            return $this->getVariantsMatchToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    /**
     * Autogenerated description for getVariantsMatch method
     *
     * @param OptionSelectionRequest $value
     * @return OptionSelectionRequestInterface
     */
    private function getVariantsMatchFromProto(OptionSelectionRequest $value): OptionSelectionRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\OptionSelectionRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\OptionSelectionRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\OptionSelectionRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\OptionSelectionRequest();
            $r->setStore($value->getStore());
            $values = [];
            foreach ($value->getValues() as $newValue) {
                $values[] = $newValue;
            }
            $r->setValues($values);
            return $r;
        };
        $out = $p();

        return $out;
    }

    /**
     * Autogenerated description for getVariantsMatch method
     *
     * @param ProductVariantResponseInterface $value
     * @return ProductVariantResponse
     * phpcs:disable Generic.Metrics.NestingLevel.TooHigh
     */
    private function getVariantsMatchToProto(ProductVariantResponseInterface $value): ProductVariantResponse
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\ProductVariantResponse
        // to \Magento\CatalogStorefrontApi\Proto\ProductVariantResponse
        /** @var \Magento\CatalogStorefrontApi\Api\Data\ProductVariantResponse $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\ProductVariantResponse();
            $res = [];
            foreach ($value->getMatchedVariants() as $item1) {
                // convert data from \Magento\CatalogStorefrontApi\Api\Data\ProductVariant
                // to \Magento\CatalogStorefrontApi\Proto\ProductVariant
                /** @var \Magento\CatalogStorefrontApi\Api\Data\ProductVariant $item1 **/
                $p = function () use ($item1) {
                    $r = new \Magento\CatalogStorefrontApi\Proto\ProductVariant();
                    $r->setId($item1->getId());
                    $values = [];
                    foreach ($item1->getOptionValues() as $newValue) {
                        $values[] = $newValue;
                    }
                    $r->setOptionValues($values);
                    $r->setProductId($item1->getProductId());
                    return $r;
                };
                $proto = $p();
                $res[] = $proto;
            }
            $r->setMatchedVariants($res);
            return $r;
        };
        $proto = $p();

        return $proto;
    }
}
